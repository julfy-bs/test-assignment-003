(function(e){function t(t){for(var c,a,u=t[0],i=t[1],l=t[2],b=0,f=[];b<u.length;b++)a=u[b],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&f.push(r[a][0]),r[a]=0;for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c]);s&&s(t);while(f.length)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],c=!0,u=1;u<n.length;u++){var i=n[u];0!==r[i]&&(c=!1)}c&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var c={},r={app:0},o=[];function a(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=c,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)a.d(n,c,function(t){return e[t]}.bind(null,c));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/test-assignment-003/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var s=i;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"4efb":function(e,t,n){},"6c79":function(e,t,n){},"70b8":function(e,t,n){"use strict";n("4efb")},7129:function(e,t,n){},ba40:function(e,t,n){},c0f1:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),r=(n("b0c0"),n("6c79"),Object(c["j"])({props:{isGreen:{type:Boolean},isBlue:{type:Boolean},isFullWidth:{type:Boolean}},setup:function(e){var t=e,n=Object(c["b"])((function(){return{"width-100":t.isFullWidth,"bg-c-green":t.isGreen,"bg-c-blue":t.isBlue}}));return function(e,t){return Object(c["m"])(),Object(c["f"])("button",{class:Object(c["l"])(["button px-4 py-2 text-white",Object(c["v"])(n)]),type:"button"},[Object(c["s"])(e.$slots,"default")],2)}}})),o=(n("fea9"),n("6b0d")),a=n.n(o);const u=a()(r,[["__scopeId","data-v-0a059fea"]]);var i=u,l=n("5502"),s=function(){var e=Object(l["b"])(),t=Object(c["b"])((function(){return e.state.modal.isModalOpened})),n=Object(c["b"])((function(){return e.state.modal.modalContent})),r=function(t){return e.commit("form/CHANGE_ONE_FIELD",t)},o=function(t){return e.commit("modal/CHANGE_MODAL_DISPLAY_CONDITION",t)},a=function(t){return e.commit("modal/CHANGE_MODAL_CONTENT",t)},u=function(e,n){t.value?(o(!1),a("")):(o(!0),n&&n>0&&r({key:"city_id",value:n}),a(e))};return{switchModal:u,isModalOpened:t,modalContent:n}},b={class:"modal__content bg-c-white"},f=Object(c["j"])({setup:function(e){var t=s(),n=t.switchModal;return function(e,t){return Object(c["m"])(),Object(c["f"])("div",{class:"modal bg-c-modal",onClick:t[0]||(t[0]=Object(c["C"])((function(e){return Object(c["v"])(n)("")}),["self"]))},[Object(c["g"])("div",b,[Object(c["s"])(e.$slots,"default")])])}}});n("70b8");const O=a()(f,[["__scopeId","data-v-c285eee2"]]);var j=O,d=(n("ac1f"),n("5319"),n("5b81"),function(e){return e.replaceAll("-","").replaceAll("(","").replaceAll(")","").replaceAll(" ","")}),m=function(){var e=Object(l["b"])(),t=s(),n=t.switchModal,r=Object(c["b"])((function(){return e.state.form.isEmailValid})),o=Object(c["b"])((function(){return e.state.form.isPhoneValid})),a=Object(c["b"])((function(){return e.state.form.fields})),u=Object(c["b"])((function(){return e.state.form.serverResponse})),i=Object(c["b"])((function(){return e.state.form.errors})),b=function(t){return e.commit("form/CHANGE_ONE_FIELD",t)},f=function(t){return n("info"),e.dispatch("form/getResponse",t)},O=function(){if(r.value&&o.value){var e={name:a.value.name,phone:d(a.value.phone),email:a.value.email,city_id:a.value.city_id};f(e).then((function(){return n("info")}))}};return{postForm:O,changeOneField:b,formFields:a,serverResponse:u,errors:i}},p={class:"form__group group-name"},v=Object(c["g"])("label",{for:"name",class:"form__label text-c-gray-700"}," Имя* ",-1),_=Object(c["j"])({setup:function(e){var t=Object(l["b"])(),n=Object(c["q"])(t.state.form.fields.name),r=m(),o=r.changeOneField;return function(e,t){return Object(c["m"])(),Object(c["f"])("div",p,[v,Object(c["B"])(Object(c["g"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return n.value=e}),required:"required",name:"name",type:"text",class:"form__input text-c-gray-900 border-c-gray-300",placeholder:"Иван Иванов",onChange:t[1]||(t[1]=function(e){return Object(c["v"])(o)({key:"name",value:n.value})})},null,544),[[c["x"],n.value]])])}}});const g=_;var h=g,y=(n("1276"),{class:"form__group group-phone"}),E=Object(c["g"])("label",{for:"phone",class:"form__label text-c-gray-700"}," Телефон* ",-1),A={for:"phone",class:"form__label from__label--error text-red-500"},x=Object(c["j"])({setup:function(e){var t=Object(l["b"])(),n=Object(c["q"])(t.state.form.fields.phone),r=m(),o=r.changeOneField,a=Object(c["b"])((function(){return t.state.form.isPhoneValid})),u=function(e){return t.commit("form/CHANGE_PHONE_VALIDATION",e)},i=function(){18!==n.value.split("").length?u(!1):u(!0)};return function(e,t){var r=Object(c["t"])("maska");return Object(c["m"])(),Object(c["f"])("div",y,[E,Object(c["B"])(Object(c["g"])("label",A," Введите корректный номер ",512),[[c["y"],!Object(c["v"])(a)]]),Object(c["B"])(Object(c["g"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return n.value=e}),required:"required",name:"phone",type:"text",minlength:"18",maxlength:"18",class:"form__input text-c-gray-900 border-c-gray-300",placeholder:"+7 (___) ___-__-__",onChange:t[1]||(t[1]=function(e){return Object(c["v"])(o)({key:"phone",value:n.value})}),onKeyup:i},null,544),[[c["x"],n.value],[r,["+7 (###) ##-##-##","+7 (###) ###-##-##"]]])])}}});const N=x;var C=N,R=(n("00b4"),{class:"form__group group-email"}),k=Object(c["g"])("label",{for:"email",class:"form__label text-c-gray-700"}," Email* ",-1),w={for:"email",class:"form__label from__label--error text-red-500"},I=Object(c["j"])({setup:function(e){var t=Object(l["b"])(),n=Object(c["q"])(t.state.form.fields.email),r=m(),o=r.changeOneField,a=Object(c["b"])((function(){return t.state.form.isEmailValid})),u=function(e){return t.commit("form/CHANGE_EMAIL_VALIDATION",e)},i=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}])|(([a-zA-Z\-\d]+\.)+[a-zA-Z]{2,24}))$/,s=function(){return""===n.value?"":i.test(n.value)?u(!0):u(!1)};return function(e,t){return Object(c["m"])(),Object(c["f"])("div",R,[k,Object(c["B"])(Object(c["g"])("label",w," Введите корректный email ",512),[[c["y"],!Object(c["v"])(a)]]),Object(c["B"])(Object(c["g"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return n.value=e}),required:"required",name:"email",type:"email",class:"form__input text-c-gray-900 border-c-gray-300",placeholder:"you@example.com",onChange:t[1]||(t[1]=function(e){return Object(c["v"])(o)({key:"email",value:n.value})}),onKeyup:s},null,544),[[c["x"],n.value]])])}}});const L=I;var D=L,M={class:"form__group group-city"},S=Object(c["g"])("label",{for:"city",class:"form__label text-c-gray-700"}," Город* ",-1),V=["value"],G=Object(c["j"])({setup:function(e){var t=Object(l["b"])(),n=Object(c["b"])((function(){return t.state.form.cities})),r=Object(c["q"])(t.state.form.fields.city_id),o=m(),a=o.changeOneField;return function(e,t){return Object(c["m"])(),Object(c["f"])("div",M,[S,Object(c["B"])(Object(c["g"])("select",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.value=e}),required:"required",name:"city",class:"form__input text-c-gray-900 form__input--select border-c-gray-300",onChange:t[1]||(t[1]=function(e){return Object(c["v"])(a)({key:"city_id",value:r.value})})},[(Object(c["m"])(!0),Object(c["f"])(c["a"],null,Object(c["r"])(Object(c["v"])(n),(function(e){return Object(c["m"])(),Object(c["f"])("option",{key:e.id,value:e.id},Object(c["u"])(e.name),9,V)})),128))],544),[[c["w"],r.value]])])}}});const P=G;var F=P,H={class:"form__group group-button"},T=Object(c["h"])(" Отправить "),q=Object(c["j"])({setup:function(e){return function(e,t){return Object(c["m"])(),Object(c["f"])("div",H,[Object(c["i"])(i,{"is-green":!0,"is-full-width":!0,type:"submit"},{default:Object(c["A"])((function(){return[T]})),_:1})])}}});const B=q;var U=B,J={class:"form__container"},$=Object(c["j"])({setup:function(e){var t=m(),n=t.postForm;return function(e,t){return Object(c["m"])(),Object(c["f"])("form",{class:"form",onSubmit:t[0]||(t[0]=Object(c["C"])((function(){return Object(c["v"])(n)&&Object(c["v"])(n).apply(void 0,arguments)}),["prevent"]))},[Object(c["g"])("div",J,[Object(c["i"])(h),Object(c["i"])(C),Object(c["i"])(D),Object(c["i"])(F),Object(c["i"])(U)])],32)}}});n("ddac");const z=$;var K=z,W={class:"app"},Y={class:"app__container"},Z={class:"buttons"},Q={class:"buttons__item"},X=Object(c["h"])(" Заказать в Москву "),ee={class:"buttons__item"},te=Object(c["h"])(" Заказать в Санкт-Петербург "),ne=Object(c["g"])("h2",{class:"modal__title text-c-gray-900"}," Заказать звонок ",-1),ce=Object(c["g"])("h2",{class:"modal__title text-c-gray-900"}," Ответ ",-1),re=Object(c["h"])(" Имя: "),oe=Object(c["h"])(" Телефон: "),ae=Object(c["h"])(" Почта: "),ue=Object(c["h"])(" Город: "),ie={key:0},le={key:1},se=Object(c["j"])({setup:function(e){var t=s(),n=t.switchModal,r=t.isModalOpened,o=t.modalContent,a=m(),u=a.serverResponse,l=a.errors;return function(e,t){return Object(c["m"])(),Object(c["f"])("main",W,[Object(c["g"])("div",Y,[Object(c["g"])("div",Z,[Object(c["g"])("div",Q,[Object(c["i"])(i,{"is-blue":!0,city:"moscow",onClick:t[0]||(t[0]=function(e){return Object(c["v"])(n)("form",1)})},{default:Object(c["A"])((function(){return[X]})),_:1})]),Object(c["g"])("div",ee,[Object(c["i"])(i,{"is-green":!0,city:"peter",onClick:t[1]||(t[1]=function(e){return Object(c["v"])(n)("form",2)})},{default:Object(c["A"])((function(){return[te]})),_:1})])]),Object(c["v"])(r)&&"form"===Object(c["v"])(o)?(Object(c["m"])(),Object(c["d"])(j,{key:0},{default:Object(c["A"])((function(){return[ne,Object(c["i"])(K)]})),_:1})):Object(c["e"])("",!0),Object(c["v"])(r)&&"info"===Object(c["v"])(o)&&Object(c["v"])(l).length>0?(Object(c["m"])(),Object(c["d"])(j,{key:1},{default:Object(c["A"])((function(){return[(Object(c["m"])(!0),Object(c["f"])(c["a"],null,Object(c["r"])(Object(c["v"])(l),(function(e){return Object(c["m"])(),Object(c["f"])("h2",{key:e,class:"modal__title text-c-gray-900"},Object(c["u"])(e),1)})),128))]})),_:1})):Object(c["e"])("",!0),Object(c["v"])(r)&&"info"===Object(c["v"])(o)&&0===Object(c["v"])(l).length?(Object(c["m"])(),Object(c["d"])(j,{key:2},{default:Object(c["A"])((function(){return[ce,Object(c["g"])("div",null,[re,Object(c["g"])("span",null,Object(c["u"])(Object(c["v"])(u).name),1)]),Object(c["g"])("div",null,[oe,Object(c["g"])("span",null,Object(c["u"])(Object(c["v"])(u).phone),1)]),Object(c["g"])("div",null,[ae,Object(c["g"])("span",null,Object(c["u"])(Object(c["v"])(u).email),1)]),Object(c["g"])("div",null,[ue,1===Object(c["v"])(u).city_id?(Object(c["m"])(),Object(c["f"])("span",ie," Москва ")):Object(c["e"])("",!0),2===Object(c["v"])(u).city_id?(Object(c["m"])(),Object(c["f"])("span",le," Питер ")):Object(c["e"])("",!0)])]})),_:1})):Object(c["e"])("",!0)])])}}});n("e8ad");const be=se;var fe=be,Oe=function(){return{isModalOpened:!1,modalContent:""}},je={CHANGE_MODAL_DISPLAY_CONDITION:function(e,t){e.isModalOpened=t||!e.isModalOpened},CHANGE_MODAL_CONTENT:function(e,t){e.modalContent=t}},de={},me={},pe={namespaced:!0,state:Oe,getters:me,mutations:je,actions:de},ve=n("1da1"),_e=(n("96cf"),n("a434"),n("498a"),n("bc3a")),ge=n.n(_e),he="http://hh.autodrive-agency.ru/test-tasks/front/task-7/",ye=function(){return{cities:[{id:1,name:"Москва"},{id:2,name:"Санкт-Петербург"},{id:3,name:"Казань"}],fields:{name:"",phone:"+7",email:"",city_id:1},serverResponse:"",errors:[],isEmailValid:!1,isPhoneValid:!1}},Ee={CHANGE_ONE_FIELD:function(e,t){e.fields[t.key]=t.value},CHANGE_ALL_FIELDS:function(e,t){e.fields=t},GET_SERVER_RESPONSE:function(e,t){e.serverResponse=t},ADD_ERROR:function(e,t){e.errors.splice(0,1,t)},CLEAR_ERROR:function(e){e.errors.splice(0,e.errors.length)},CHANGE_EMAIL_VALIDATION:function(e,t){e.isEmailValid=t},CHANGE_PHONE_VALIDATION:function(e,t){e.isPhoneValid=t}},Ae={getResponse:function(e,t){return Object(ve["a"])(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c=e.commit,n.prev=1,n.next=4,ge.a.post(he,t).then((function(e){if(e){var t=JSON.parse(e.config.data.trim());c("GET_SERVER_RESPONSE",t);var n={name:"",phone:"",email:"",city_id:0};c("CHANGE_ALL_FIELDS",n),c("CLEAR_ERROR")}}));case 4:n.next=16;break;case 6:if(n.prev=6,n.t0=n["catch"](1),!ge.a.isAxiosError(n.t0)){n.next=14;break}return c("GET_SERVER_RESPONSE",n.t0),c("ADD_ERROR",n.t0.message),n.abrupt("return",n.t0.message);case 14:return console.log("unexpected error: ",n.t0),n.abrupt("return","An unexpected error occurred");case 16:return n.prev=16,n.finish(16);case 18:case"end":return n.stop()}}),n,null,[[1,6,16,18]])})))()}},xe={},Ne={namespaced:!0,state:ye,getters:xe,mutations:Ee,actions:Ae},Ce=Object(l["a"])({modules:{modal:pe,form:Ne}}),Re=n("795b"),ke=Object(c["c"])(fe);ke.use(Ce).use(Re["a"]).mount("#app")},ddac:function(e,t,n){"use strict";n("7129")},e8ad:function(e,t,n){"use strict";n("ba40")},fea9:function(e,t,n){"use strict";n("c0f1")}});
//# sourceMappingURL=app.8e1a5d62.js.map